<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>My music web app</title>

    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="style.css" />

    <!-- Add html-midi-player -->
    <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.21.0/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.1.1"></script>

    <!-- Add Vexflow -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vexflow/3.0.9/vexflow-debug.js" integrity="sha512-lKd1a91LRkmZa8zZUEdjzgepWZpue8mVl5ikn1Itf1nQoNQsnzuEMbAQJz6C/dVYSw63GFYo+t0M+bCnLZf/Sg==" crossorigin="anonymous"></script>

    <!-- Add Tone.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.13/Tone.js" integrity="sha512-SAB2YrHeaZfb6W1w+tAMm+IUICzUMyf7TJ8upY+NjLYl8jseufUW4yYzoSHfNL9N2rzDlw5PWJrf7rPIQ6VhNw==" crossorigin="anonymous"></script>

    <!-- Add Tensorflow js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tensorflow/1.2.8/tf.min.js"></script>
    <!-- Core library, since we're going to use a player -->
    <script src="https://cdn.jsdelivr.net/npm/@magenta/music@^1.21.0/es6/core.js"></script>
    <!--Model we want to use -->
    <script src="https://cdn.jsdelivr.net/npm/@magenta/music@^1.21.0/es6/music_rnn.js"></script>

    <!-- import the webpage's javascript file -->
    <script src="script.js" defer></script>
  </head>
  <body>
      <h1>AI智能生成音乐Demo</h1>
    <p style="width: 90%;">这里根据用户的输入（包括情绪，想法等），自动生成一段简单的音乐（大约包含2~5个音符），然后可以点击Generate，通过AI框架Magenta自动生成一段完整的音乐.</p>
    <br><!-- Input form -->

    <h3>通过Add按钮输入几个音符:</h3>
    <form id="input-form">

      <!-- Duration -->
      <label for="duration">Duration</label>
      <select id="duration" required>
        <option value="" selected disabled>...</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="4">4</option>
        <option value="8">8</option>
        <option value="16">16</option>
        <option value="r1">r1</option>
        <option value="r2">r2</option>
        <option value="r4">r4</option>
        <option value="r8">r8</option>
        <option value="r16">r16</option>
      </select>

      <!-- Pith -->
      <label for="pitch">Pitch</label>
      <select id="pitch" required>
        <option value="" selected disabled>...</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="A">A</option>
        <option value="B">B</option>
      </select>

      <!-- Accidental -->
      <label for="accidental">Accidental</label>
      <select id="accidental" required>
        <option value="" selected disabled>...</option>
        <option value="b">&#9837;</option>
        <option value="">&#9838;</option>
        <option value="#">&#9839;</option>
      </select>

      <!-- Octave -->
      <label for="octave">Octave</label>
      <select id="octave" required>
        <option value="" selected disabled>...</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>

      <!-- Dot -->
      <input id="dotted" type="checkbox" />

      <!-- Button -->
      <button id="input">
        Add
      </button>
    </form>

    <!-- Staff -->
    <div id="staff">

    </div>

    <!-- Player controlers -->
    <button id="play">
      Play
    </button>
    <button id="erase">
      Erase
    </button>
    <button id="generate">
      Generate
    </button>

    <!-- Add bpm -->
    <label for="bpm">bpm</label>
    <input type="number" id="bpm" min="50" max="180" value="90">
    <br>
    <br>
    <h3>生成后的音乐:</h3>
    <!-- Add midi player -->
    <midi-visualizer type="staff" id="myVisualizer"></midi-visualizer>
    <midi-player sound-font="https://storage.googleapis.com/magentadata/js/soundfonts/salamander" visualizer="#myVisualizer" id="midiPlayer"></midi-player>

  </body>
</html>
